{% extends 'base.html' %}
{% block title %}Profile â€” Car Pooling{% endblock %}
{% block content %}
<div style="max-width:720px;margin:0 auto">
    <h2 class="section">Your Profile</h2>
    <div class="panel">
        <p><strong>Username:</strong> {{ user.username }}</p>
        <p><strong>Name:</strong> {{ user.first_name }} {{ user.last_name }}</p>
        <p><strong>Email:</strong> {{ user.email }}</p>
        {% if user.userprofile %}
        <p><strong>Role:</strong> {{ user.userprofile.get_role_display }}</p>
        <p><strong>Contact:</strong> {{ user.userprofile.contact }}</p>
        <p><strong>Vehicle:</strong> {{ user.userprofile.vehicle }} {{ user.userprofile.plate }}</p>
        <p><strong>Capacity:</strong> {{ user.userprofile.capacity }}</p>
        {% endif %}
        <div style="margin-top:10px" class="actions">
            <a class="btn" href="{% url 'rides:edit_info' %}">Edit Profile</a>
            <a class="btn ghost" href="{% url 'rides:change_password' %}">Change Password</a>
        </div>
        <form method="post" action="{% url 'rides:revert_to_passenger' %}" style="display:inline">
            {% csrf_token %}
            {% if user.userprofile.role == 'driver' %}
            <button class="btn ghost" type="submit">Switch to Passenger</button>
            {% endif %}
        </form>

    </div>
</div>
{% endblock %}