{% extends 'base.html' %}
{% block title %}Search Results — Car Pooling{% endblock %}
{% block content %}
<div style="max-width:920px;margin:0 auto">
    <h2 class="section">Available Rides</h2>

    {% if rides %}
    <p class="muted">Showing rides to {{ rides.0.destination }}</p>

    <table>
        <thead>
            <tr>
                <th>Route</th>
                <th>When</th>
                <th>Driver</th>
                <th>Seats left</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for r in rides %}
            <tr>
                <td>{{ r.source }} → {{ r.destination }}</td>
                <td>{{ r.arrivaldate|date:"Y-m-d H:i" }}</td>
                <td>
                    {% if r.driver %}
                    {{ r.driver.username }}
                    {% else %}
                    <span class="muted">Unassigned</span>
                    {% endif %}
                </td>
                <td>{{ r.available_seats }}</td>
                <td>
                    <a class="btn" href="{% url 'rides:join_ride' r.id %}">Join</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="muted">No matching rides found.</p>
    {% endif %}
</div>
{% endblock %}